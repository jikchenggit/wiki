---
title: du 命令
description: du 命令
published: true
date: 2021-08-23T03:26:49.923Z
tags: 命令, du
editor: markdown
dateCreated: 2020-03-20T10:10:05.784Z
---

 # du命令
 通过df命令很容易发现哪个磁盘的存储空间快没了。系统管理员面临的下一个问题是，发生这种情况时要怎么办。

另一个有用的命令是du命令。du命令可以显示某个特定目录（默认情况下是当前目录）的磁盘使用情况。这一方法可用来快速判断系统上某个目录下是不是有超大文件。

默认情况下，du命令会显示当前目录下所有的文件、目录和子目录的磁盘使用情况，它会以磁盘块为单位来表明每个文件或目录占用了多大存储空间。对标准大小的目录来说，这个输出会是一个比较长的列表。下面是du命令的部分输出：
```
$ du
484     ./.gstreamer-0.10
8       ./Templates
8       ./Download
8       ./.ccache/7/0
24      ./.ccache/7
368     ./.ccache/a/d
384     ./.ccache/a
424     ./.ccache
8       ./Public
8       ./.gphpedit/plugins
32      ./.gphpedit
72      ./.gconfd
128     ./.nautilus/metafiles
384     ./.nautilus
72      ./.bittorrent/data/metainfo
20      ./.bittorrent/data/resume
144     ./.bittorrent/data
152     ./.bittorrent
8       ./Videos
8       ./Music
16      ./.config/gtk-2.0
40      ./.config
8       ./Documents
```

每行输出左边的数值是每个文件或目录占用的磁盘块数。注意，这个列表是从目录层级的最底部开始，然后按文件、子目录、目录逐级向上。

这么用du命令（不加参数，用默认参数）作用并不大。我们更想知道每个文件和目录占用了多大的磁盘空间，但如果还得逐页查找的话就没什么意义了。


-c：显示所有已列出文件总的大小。

-h：按用户易读的格式输出大小，即用K替代千字节，用M替代兆字节，用G替代吉字节。

-s：显示每个输出参数的总计。


# 参考命令
| | | 
| --- | --- | 
| -0 | 以0字节而不是换行符结束每个输出 | 
|  -a |统计所有文件 |
| -BM | 在打印前设置打印出来的单位,M,G| 
| -c | 合计成总数 | 
| -d | 统计展示的目录级别 ,-d 1 为当前目录下的目录大小, -d 0 当前目录大小| 
| --inodes | 列出inode 使用信息,而不是数据块的| 
| -m | 以m 为单位 统计  | 
| -L | 排除所有的符号链接到的文件大小 | 
| -P | 不统计所有的符号链接所指向的文件大小(默认) | 
| -S | 统计当前目录,且不包含所有子目录的大小 | 
| -h | 以人类阅读的格式输出 | 
| -s | 只显示统计总数 | 
| -t | 正数:排除小于此大小的项目.负数:排除大于size 的项目. | 
| --time | 显示目录的最后的修改时间  | 
| time=WORD | 显示指定的时间类型:atime(创建时间), access(访问时间), use(读取时间),ctime(修改时间)or status(状态) | 
| -X | 排除某些文件,进行统计 | 


# 范例:
## 表达式使用:

```bash
 du --exclude='*.o'
``` 
## 输出整行
```bash
du -0
```

## 输出并排序
- 输出单位为m
```bash
du -sBM *  | sort -nr
```
- 输出单位为k
```bash
du -sk *  | sort -nr
```






